{
  "pluginAlias": "ModelightingV2Platform",
  "pluginType": "platform",
  "singular": false,
  "headerDisplay": "Modern Homebridge plugin for Mode Lighting eDinControl with auto-discovery. See the [README](https://github.com/pluddy/homebridge-modelighting-v2#readme) for detailed configuration instructions.",
  "footerDisplay": "For help and support visit the [GitHub repository](https://github.com/pluddy/homebridge-modelighting-v2).",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "Mode Lighting",
        "required": true,
        "description": "The name that will appear in your Homebridge log for this platform."
      },
      "NPU_IP": {
        "title": "NPU IP Address",
        "type": "string",
        "required": true,
        "format": "ipv4",
        "placeholder": "192.168.1.101",
        "description": "The IP address of your Mode Lighting NPU."
      },
      "discoverChannels": {
        "title": "Discover Channels",
        "type": "boolean",
        "default": true,
        "description": "Automatically discover and create accessories for all DMX channels."
      },
      "discoverScenes": {
        "title": "Discover Scenes",
        "type": "boolean",
        "default": true,
        "description": "Automatically discover and create accessories for all named scenes."
      },
      "channelFilter": {
        "title": "Channel Filter",
        "type": "array",
        "items": {
          "type": "integer",
          "minimum": 1,
          "maximum": 999
        },
        "description": "Optional: List of channel LoadIds to include. If empty, all channels are included.",
        "condition": {
          "functionBody": "return model.discoverChannels === true;"
        }
      },
      "sceneFilter": {
        "title": "Scene Filter",
        "type": "array",
        "items": {
          "type": "integer",
          "minimum": 0,
          "maximum": 999
        },
        "description": "Optional: List of scene numbers to include. If empty, all scenes are included.",
        "condition": {
          "functionBody": "return model.discoverScenes === true;"
        }
      },
      "requestTimeout": {
        "title": "Request Timeout (ms)",
        "type": "integer",
        "default": 5000,
        "minimum": 1000,
        "maximum": 30000,
        "description": "HTTP request timeout in milliseconds."
      },
      "maxRetries": {
        "title": "Max Retries",
        "type": "integer",
        "default": 10,
        "minimum": 0,
        "maximum": 20,
        "description": "Maximum number of retry attempts for failed requests."
      },
      "retryDelay": {
        "title": "Retry Delay (ms)",
        "type": "integer",
        "default": 500,
        "minimum": 100,
        "maximum": 5000,
        "description": "Delay between retry attempts in milliseconds."
      }
    }
  },
  "layout": [
    {
      "type": "section",
      "title": "NPU Configuration",
      "expandable": false,
      "items": [
        "name",
        "NPU_IP"
      ]
    },
    {
      "type": "section",
      "title": "Discovery Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "discoverChannels",
        "discoverScenes",
        {
          "key": "channelFilter",
          "type": "array",
          "title": "Channel Filter",
          "description": "Enter channel LoadIds (found in discovery test) to include. Leave empty to include all channels.",
          "buttonText": "Add Channel",
          "items": [
            {
              "type": "number",
              "placeholder": "9"
            }
          ],
          "condition": {
            "functionBody": "return model.discoverChannels === true;"
          }
        },
        {
          "key": "sceneFilter",
          "type": "array",
          "title": "Scene Filter",
          "description": "Enter scene numbers (found in discovery test) to include. Leave empty to include all scenes.",
          "buttonText": "Add Scene",
          "items": [
            {
              "type": "number",
              "placeholder": "24"
            }
          ],
          "condition": {
            "functionBody": "return model.discoverScenes === true;"
          }
        }
      ]
    },
    {
      "type": "section",
      "title": "Network Settings (Advanced)",
      "expandable": true,
      "expanded": false,
      "items": [
        "requestTimeout",
        "maxRetries",
        "retryDelay"
      ]
    }
  ]
}
